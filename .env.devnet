# ─── Dualis Finance — Devnet Environment ───
# Single-server deployment: Validator + App on 84.32.223.16
# Canton services already running via /opt/first/splice-node/docker-compose/validator/

# ─── Canton Network (localhost — same machine as validator) ───
CANTON_ENV=devnet
CANTON_JSON_API_URL=http://localhost:7575
CANTON_GRPC_URL=localhost:5001
CANTON_MOCK=false

# Auth disabled on this validator (compose-disable-auth.yaml)
CANTON_JWT_TOKEN=
# No TLS — internal localhost communication
CANTON_TLS_CERT_PATH=

# ─── Parties ───
# Validator full party ID (hint::namespace)
CANTON_OPERATOR_PARTY=cantara-finance-validator-dev::12204bcabe5f617d26d082a442b560d61e60e57ad845260b01c98657285eeeb2e7ef
CANTON_ORACLE_PARTY=cantara-finance-validator-dev::12204bcabe5f617d26d082a442b560d61e60e57ad845260b01c98657285eeeb2e7ef
CANTON_LIQUIDATOR_PARTY=cantara-finance-validator-dev::12204bcabe5f617d26d082a442b560d61e60e57ad845260b01c98657285eeeb2e7ef
CANTON_TREASURY_PARTY=cantara-finance-validator-dev::12204bcabe5f617d26d082a442b560d61e60e57ad845260b01c98657285eeeb2e7ef
CANTON_CREDIT_ASSESSOR_PARTY=cantara-finance-validator-dev::12204bcabe5f617d26d082a442b560d61e60e57ad845260b01c98657285eeeb2e7ef

# ─── Application ───
NODE_ENV=production
PORT=3001
HOST=0.0.0.0
LOG_LEVEL=info

# ─── Database (port 5433 to avoid conflict with Canton's PostgreSQL on 5432) ───
DATABASE_URL=postgresql://dualis:dualis_secure_password@localhost:5433/dualis
DB_POOL_MIN=2
DB_POOL_MAX=20

# ─── Redis ───
REDIS_URL=redis://localhost:6379

# ─── Auth / JWT ───
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_64
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_64
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# ─── Frontend URLs ───
FRONTEND_URL=https://dualis.finance
NEXT_PUBLIC_API_URL=https://api.dualis.finance/v1
NEXT_PUBLIC_WS_URL=wss://api.dualis.finance/v1/ws
NEXT_PUBLIC_APP_URL=https://dualis.finance

# ─── CORS ───
CORS_ORIGIN=https://dualis.finance

# ─── Rate Limiting (production) ───
RATE_LIMIT_MAX=120
RATE_LIMIT_WINDOW_MS=60000
BRUTE_FORCE_MAX_ATTEMPTS=8
BRUTE_FORCE_LOCKOUT_SEC=900
BAN_THRESHOLD=3
BAN_DURATION_SECONDS=900

# ─── Oracle ───
ORACLE_UPDATE_INTERVAL_MS=30000
ORACLE_CANTON_SYNC_ENABLED=true
ORACLE_MIN_SOURCES=1

# ─── Features ───
FEATURE_FLASH_LOANS=true
FEATURE_SEC_LENDING=true
FEATURE_GOVERNANCE=true

# ─── Notification ───
RESEND_API_KEY=
RESEND_DRY_RUN=true

# ─── KYC / Compliance (mock for devnet) ───
SUMSUB_MOCK=true
CHAINALYSIS_MOCK=true

# ─── Sentry ───
SENTRY_DSN=

# ─── Docker (Dualis app PostgreSQL — NOT Canton's) ───
POSTGRES_USER=dualis
POSTGRES_PASSWORD=dualis_secure_password
POSTGRES_DB=dualis
