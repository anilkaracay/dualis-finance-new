# ─── Dualis Finance — Production Environment Template ───
# This is a TEMPLATE. Real secrets must NEVER be committed to the repo.
# Use SET_IN_RAILWAY / SET_IN_VERCEL placeholders for secrets.

# ─── Application ───
NODE_ENV=production
PORT=4000
HOST=0.0.0.0
LOG_LEVEL=info

# ─── Next.js Frontend (set in Vercel) ───
NEXT_PUBLIC_API_URL=https://api.dualis.finance/v1
NEXT_PUBLIC_WS_URL=wss://api.dualis.finance/v1/ws
NEXT_PUBLIC_APP_URL=https://app.dualis.finance

# ─── Canton Network ───
CANTON_ENV=devnet
CANTON_JSON_API_URL=SET_IN_RAILWAY
CANTON_GRPC_URL=SET_IN_RAILWAY
CANTON_MOCK=false
CANTON_JWT_TOKEN=SET_IN_RAILWAY
CANTON_OPERATOR_PARTY=SET_IN_RAILWAY
CANTON_ORACLE_PARTY=SET_IN_RAILWAY
CANTON_CREDIT_ASSESSOR_PARTY=SET_IN_RAILWAY
CANTON_TREASURY_PARTY=SET_IN_RAILWAY

# ─── Database (PostgreSQL) ───
# Railway auto-injects DATABASE_URL from PostgreSQL plugin
DATABASE_URL=SET_IN_RAILWAY
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=30

# ─── Redis ───
# Railway auto-injects REDIS_URL from Redis plugin
REDIS_URL=SET_IN_RAILWAY

# ─── Auth / JWT ───
# Generate with: openssl rand -hex 32
JWT_SECRET=SET_IN_RAILWAY
JWT_EXPIRY=24h
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_SECRET=SET_IN_RAILWAY
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12
FRONTEND_URL=https://app.dualis.finance

# ─── Rate Limiting (stricter for production) ───
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# ─── CORS (strict — no wildcards) ───
CORS_ORIGIN=https://app.dualis.finance,https://dualis.finance

# ─── Oracle / Price Feeds ───
ORACLE_UPDATE_INTERVAL_MS=30000
COINGECKO_API_KEY=SET_IN_RAILWAY
COINGECKO_BASE_URL=https://api.coingecko.com/api/v3
BINANCE_WS_URL=wss://stream.binance.com:9443/ws
BINANCE_WS_ENABLED=false
ORACLE_CIRCUIT_BREAKER_THRESHOLD=0.10
ORACLE_TWAP_WINDOW_MS=300000
ORACLE_CANTON_SYNC_ENABLED=true
ORACLE_MIN_SOURCES=1

# ─── Feature Flags (conservative — enable carefully) ───
FEATURE_FLASH_LOANS=false
FEATURE_SEC_LENDING=false
FEATURE_GOVERNANCE=false

# ─── Sentry (error tracking) ───
SENTRY_DSN=SET_IN_RAILWAY
NEXT_PUBLIC_SENTRY_DSN=SET_IN_VERCEL

# ─── Deploy Metadata ───
DEPLOY_TIMESTAMP=SET_IN_CI

# ─── Docker (only used in self-hosted mode) ───
POSTGRES_USER=dualis
POSTGRES_PASSWORD=SET_IN_DOCKER
POSTGRES_DB=dualis

# ─── Monitoring ───
GF_SECURITY_ADMIN_PASSWORD=SET_IN_DOCKER
